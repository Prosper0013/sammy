<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ALGORN PnL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===========================
   GLOBAL + LANDSCAPE ONLY
=========================== */
body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: url("logo.jpg") no-repeat center center/cover;
    filter: blur(0px);
}

#rotateMessage {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #000;
    color: #fff;
    font-size: 26px;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 30px;
}

@media screen and (orientation: portrait) {
    #mainContent { display: none; }
    #rotateMessage { display: flex; }
}

@media screen and (orientation: landscape) {
    #mainContent { display: block; }
    #rotateMessage { display: none; }
}

/* ===========================
   MAIN LANDSCAPE CARD
=========================== */
.pnl_container {
    width: 92%;
    margin: 20px auto;
    padding: 30px;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(14px);
    border-radius: 22px;
    color: #fff;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* ===========================
   LEFT SIDE (User + Balance)
=========================== */
.leftInfo {
    width: 26%;
}

.leftInfo h3 {
    margin: 0;
    font-size: 22px;
    font-weight: bold;
}

.leftItem {
    margin-top: 16px;
    font-size: 15px;
    color: #ccc;
}

/* ===========================
   MIDDLE LEFT (Contract + Referral)
=========================== */
.refBox {
    width: 24%;
    padding: 16px;
    background: rgba(255,255,255,0.08);
    border-radius: 14px;
}

.refBox p {
    margin: 0;
    font-size: 14px;
    color: #ddd;
}

#refQR {
    width: 110px;
    height: 110px;
    margin-top: 12px;
    background: #fff;
    padding: 6px;
    border-radius: 10px;
}

/* ===========================
   TOP RIGHT (Logo + ALGORN)
=========================== */
.rightTop {
    width: 26%;
    text-align: right;
}

#botLogo {
    width: 65px;
    height: 65px;
    border-radius: 14px;
    margin-bottom: 8px;
}

#botName {
    font-size: 26px;
    font-weight: bold;
    margin: 0;
}

.tokenName {
    font-size: 20px;
    margin: 4px 0 0 0;
}

.tokenTicker {
    color: #bbb;
    margin: 0;
    font-size: 14px;
}

/* ===========================
   RIGHT SIDE (Rocket + PNL)
=========================== */
.rightPNL {
    width: 22%;
    text-align: center;
}

#rocketImg {
    width: 110px;
    margin-bottom: 10px;
}

.pnlValue {
    font-size: 52px;
    font-weight: bold;
}

.pnlProfit { color: #00e07a; }
.pnlLoss { color: #ff4545; }

.smallAmount {
    margin-top: 4px;
    color: #ddd;
    font-size: 16px;
}
</style>

</head>
<body>

<!-- ROTATE WARNING -->
<div id="rotateMessage">
    Please rotate your device to <b>landscape</b> to view your PnL report.
</div>

<!-- MAIN CONTENT -->
<div id="mainContent">

    <div class="pnl_container">

        <!-- LEFT SECTION -->
        <div class="leftInfo">
            <h3 id="userTelegram">@username</h3>

            <div class="leftItem">
                <b>Wallet Balance:</b>
                <div id="walletBalance">0.00</div>
            </div>
        </div>

        <!-- CONTRACT + REFERRAL -->
        <div class="refBox">
            <p><b>Contract:</b></p>
            <p id="tokenContract">---</p>
            <br>
            <p><b>Your Referral Link:</b></p>
            <p id="refLink">---</p>

            <img id="refQR" src="">
        </div>

        <!-- LOGO + BOT INFO -->
        <div class="rightTop">
            <img id="botLogo" src="logo.jpg">
            <h1 id="botName">ALGORN</h1>
            <p class="tokenName" id="tokenName">Token Name</p>
            <p class="tokenTicker" id="tokenTicker">$TICKER</p>
        </div>

        <!-- PNL + ROCKET -->
        <div class="rightPNL">
            <img id="rocketImg" src="rocket.png">

            <div id="pnlValue" class="pnlValue">0%</div>
            <div id="pnlAmount" class="smallAmount">$0.00</div>
        </div>

    </div>

</div>

<!-- JS FOR PARAMS + QR -->
<script>
const params = new URLSearchParams(window.location.search);

// Values
const user = params.get("user") || "@unknown";
const balance = params.get("balance") || "0";
const contract = params.get("contract") || "N/A";
const name = params.get("name") || "Unnamed Token";
const ticker = params.get("symbol") || "---";
const pnl = parseFloat(params.get("pnl_percent")) || 0;
const pnlAmount = parseFloat(params.get("pnl_amount")) || 0;
const ref = params.get("ref") || "https://algorn.ai/ref";

// Update DOM
document.getElementById("userTelegram").textContent = user;
document.getElementById("walletBalance").textContent = balance;
document.getElementById("tokenContract").textContent = contract;
document.getElementById("tokenName").textContent = name;
document.getElementById("tokenTicker").textContent = "$" + ticker;
document.getElementById("refLink").textContent = ref;

// PNL Color
const pnlBox = document.getElementById("pnlValue");

pnlBox.textContent = (pnl > 0 ? "+" : "") + pnl.toFixed(2) + "%";
document.getElementById("pnlAmount").textContent =
    (pnlAmount > 0 ? "+" : "-") + "$" + Math.abs(pnlAmount).toFixed(2);

if (pnl >= 0) {
    pnlBox.classList.add("pnlProfit");
} else {
    pnlBox.classList.add("pnlLoss");
}

// QR CODE generator (Google chart)
document.getElementById("refQR").src =
    "https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=" + encodeURIComponent(ref);
</script>

</body>
</html>
